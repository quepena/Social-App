(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},135:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(31),o=a.n(c),l=(a(104),a(105),a(28)),s=a(152),u=a(147),i=a(148),p=a(89),m=a(153),d=a(150),E=a(8),f=a(6),v=a.n(f),g=a(9),y=a(10),h=a.n(y),b=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.userLogin})).userInfo;return r.a.createElement("header",null,r.a.createElement(s.a,{bg:"primary",variant:"dark",expand:"lg"},r.a.createElement(u.a,null,r.a.createElement(i.a,{style:{display:"flex",alignItems:"center"}},r.a.createElement(p.a,{sm:5},r.a.createElement(l.LinkContainer,{to:"/"},r.a.createElement(s.a.Brand,null,"Social-App"))),r.a.createElement(p.a,{sm:5},r.a.createElement(s.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(s.a.Collapse,{id:"basic-navbar-nav"},t?r.a.createElement(m.a,{className:"me-auto"},r.a.createElement(l.LinkContainer,{to:"/"},r.a.createElement(m.a.Link,null,"Friends")),r.a.createElement(l.LinkContainer,{to:"/messages"},r.a.createElement(m.a.Link,null,"Messages"))):r.a.createElement("div",null)))),r.a.createElement(i.a,null,r.a.createElement(p.a,{sm:2},r.a.createElement(m.a,null,t?r.a.createElement(d.a,{title:"Hello, "+t.knownAs.charAt(0).toUpperCase()+t.knownAs.slice(1),id:"name"},r.a.createElement(l.LinkContainer,{to:"/users/profile"},r.a.createElement(d.a.Item,null,"Profile")),r.a.createElement(d.a.Divider,null),r.a.createElement(l.LinkContainer,{to:"/profile/edit"},r.a.createElement(d.a.Item,null,"Edit profile")),r.a.createElement(d.a.Divider,null),r.a.createElement(d.a.Item,{onClick:function(){e((function(e){localStorage.removeItem("userInfo"),e({type:"USER_LOGOUT"})}))}},"Logout")):r.a.createElement(l.LinkContainer,{to:"/login"},r.a.createElement(m.a.Link,null,"Login"))))))))},O=(a(135),a(50)),S=a(7),j=a(155),_=a(151),w=a(91),x=a(98),I=function(e){var t=e.chatMessage,a=e.own,c=e.conversation,o=Object(n.useState)([]),l=Object(S.a)(o,2),s=l[0],u=l[1],i=Object(E.c)((function(e){return e.userLogin})).userInfo;return Object(n.useEffect)((function(){var e=c.participants.find((function(e){return e!==i._id}));(function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()("/api/users/users/".concat(t));case 2:a=e.sent,u(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(e)}),[i,c]),r.a.createElement(j.a,{className:a?"chatMessageOwn":"chatMessage",style:{marginBottom:"2vh"},key:t._id},r.a.createElement(j.a.Body,null,a?r.a.createElement(j.a.Header,null,"You"):r.a.createElement(j.a.Header,null,s.username),r.a.createElement(j.a.Title,null,t.contents),r.a.createElement(j.a.Footer,null,Object(x.a)(t.date))))},C=a(97),L=function(e){var t=e.conversation,a=Object(n.useState)([]),c=Object(S.a)(a,2),o=c[0],l=c[1],s=Object(E.c)((function(e){return e.userLogin})).userInfo;return Object(n.useEffect)((function(){var e=t.participants.find((function(e){return e!==s._id}));(function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h()("/api/users/users/".concat(t));case 2:a=e.sent,l(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(e)}),[s,t]),r.a.createElement(j.a,{style:{margin:"2% 0 2% 0"}},r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Title,null,o.username)))},k=a(35),R=a(36),U=function(e){var t=e.history,a=Object(E.b)(),c=Object(n.useState)([]),o=Object(S.a)(c,2),l=o[0],s=o[1],m=Object(n.useState)(null),d=Object(S.a)(m,2),f=d[0],y=d[1],b=Object(n.useState)([]),x=Object(S.a)(b,2),U=x[0],T=x[1],A=Object(n.useState)(""),P=Object(S.a)(A,2),D=P[0],N=P[1],F=Object(n.useState)(null),G=Object(S.a)(F,2),B=G[0],M=G[1],Q=Object(n.useRef)(),z=Object(n.useRef)(),W=Object(E.c)((function(e){return e.userLogin})).userInfo,J={headers:{Authorization:"Bearer ".concat(W.token)}};Object(n.useEffect)((function(){W?(Q.current=Object(C.a)("https://social-media-application-mern.herokuapp.com/"),Q.current.on("getMessage",(function(e){M({sender:e.sender,contents:e.contents,date:Date.now()})}))):t.push("/login")}),[W,t]),Object(n.useEffect)((function(){B&&(null===f||void 0===f?void 0:f.participants.includes(B.sender))&&T((function(e){return[].concat(Object(O.a)(e),[B])}))}),[B,f]),Object(n.useEffect)((function(){W?(Q.current.emit("addUser",W._id),Q.current.on("getUsers",(function(e){console.log(e)}))):t.push("/login")}),[W,t]),Object(n.useEffect)((function(){W?function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/api/conversations/".concat(t),J);case 3:a=e.sent,console.log(a.data),s(a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()(W._id):t.push("/login")}),[W,t]),Object(n.useEffect)((function(){W?function(){var e=Object(g.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/messages/".concat(t),J);case 2:a=e.sent,n=a.data,T(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(null===f||void 0===f?void 0:f._id):t.push("/login")}),[a,t,W,f]),Object(n.useEffect)((function(){W?z.current&&z.current.scrollIntoView({behavior:"auto"}):t.push("/login")}),[a,t,W,U]);var H=function(){var e=Object(g.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={sender:W._id,contents:D,conversationId:f._id},console.log(a),n=f.participants.find((function(e){return e!==W._id})),Q.current.emit("sendMessage",{sender:W._id,reciever:n,contents:D}),e.next=7,h.a.post("/api/messages",a,J);case 7:r=e.sent,T([].concat(Object(O.a)(U),[r.data]));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,W?r.a.createElement(u.a,null,r.a.createElement(j.a,null,r.a.createElement(j.a.Body,null,r.a.createElement(i.a,null,r.a.createElement(p.a,{md:4,style:{border:"solid #158cba 3px",borderRadius:"2%",margin:"1%"}},l.map((function(e){return r.a.createElement("div",{onClick:function(){y(e)}},r.a.createElement(L,{conversation:e}))}))),r.a.createElement(p.a,null,f?r.a.createElement(p.a,null,r.a.createElement(p.a,{className:"chatBox"},r.a.createElement(p.a,{md:8,className:"chatBoxWrapper"},U.map((function(e){return r.a.createElement("div",{ref:z},r.a.createElement(I,{chatMessage:e,own:e.sender===W._id,conversation:f}))})))),r.a.createElement(p.a,{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}},r.a.createElement(_.a.Control,{onChange:function(e){return N(e.target.value)},value:D,className:"mx-2",as:"textarea",placeholder:"Write a message here"}),r.a.createElement(w.a,{onClick:H,type:"submit",variant:"primary"},r.a.createElement(k.a,{className:"mx-2",icon:R.a})))):r.a.createElement("p",{style:{fontSize:"25px"}},"Choose a conversation to chat!")))))):r.a.createElement("div",null))},T=function(e){var t=e.history,a=Object(n.useState)(""),c=Object(S.a)(a,2),o=c[0],l=c[1];return r.a.createElement(_.a,{onSubmit:function(e){e.preventDefault(),o.trim()?t.push("/search/".concat(o)):t.push("/")},style:{display:"flex",justifyContent:"center",alignItems:"center"},className:"my-5"},r.a.createElement(_.a.Control,{type:"text",name:"q",onChange:function(e){return l(e.target.value)},placeholder:"Find a user by name, username, country or a city"}),r.a.createElement(w.a,{type:"submit",variant:"primary"},r.a.createElement(k.a,{className:"mx-2",icon:R.b})))},A=a(11),P=function(e){var t=e.match,a=e.history,c=Object(n.useState)([]),o=Object(S.a)(c,2),s=o[0],p=o[1],m=Object(E.c)((function(e){return e.userLogin})).userInfo,d=t.params.keyword,f=Object(n.useState)([]),y=Object(S.a)(f,2);y[0],y[1];return Object(n.useEffect)((function(){if(m){var e={headers:{Authorization:"Bearer ".concat(m.token)}};(function(){var t=Object(g.a)(v.a.mark((function t(){var a,n,r,c=arguments;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>0&&void 0!==c[0]?c[0]:"",t.next=3,h.a.get("/api/users/users?keyword=".concat(a),e);case 3:n=t.sent,r=n.data,p(r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(d)}else a.push("/login")}),[d,a,m]),r.a.createElement(u.a,null,r.a.createElement(i.a,null,r.a.createElement(A.d,{render:function(e){var t=e.history;return r.a.createElement(T,{history:t})}})),r.a.createElement(i.a,{style:{display:"flex",juctifyContent:"center",alignItems:"center",flexWrap:"wrap"}},s.map((function(e){return m&&e._id===m._id?r.a.createElement("div",{key:e._id}):r.a.createElement(l.LinkContainer,{to:"users/".concat(e._id),key:e._id,style:{width:"30vh",margin:"2vh"}},r.a.createElement(j.a,null,r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Title,null,r.a.createElement(k.a,{className:"mx-2",icon:R.c}),r.a.createElement("strong",null,e.username)),r.a.createElement(j.a.Text,null,e.knownAs.charAt(0).toUpperCase()+e.knownAs.slice(1)+", "+e.gender),r.a.createElement(j.a.Text,null,e.city+", "+e.country),r.a.createElement(j.a.Text,null,e.introduction),r.a.createElement(w.a,null,"Go to profile"))))}))))},D=a(39),N=function(e){var t=e.children;return r.a.createElement(u.a,null,r.a.createElement(i.a,{className:"justify-content-md-center"},r.a.createElement(p.a,{xs:12,md:6},t)))},F=a(149),G=function(){return r.a.createElement(F.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"}},r.a.createElement("span",{className:"sr-only"}))},B=a(154),M=function(e){var t=e.variant,a=e.children;return r.a.createElement(B.a,{variant:t},a)};M.defaultProps={variant:"info"};var Q=M,z=function(e){var t=e.location,a=e.history,c=Object(n.useState)(""),o=Object(S.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(""),m=Object(S.a)(u,2),d=m[0],f=m[1],y=Object(E.b)(),b=Object(E.c)((function(e){return e.userLogin})),O=b.userInfo,j=b.loading,x=b.error,I=t.search?t.search.split("=")[1]:"/";Object(n.useEffect)((function(){O&&a.push(I)}),[a,O,I]);return r.a.createElement(N,null,x&&r.a.createElement(Q,{variant:"danger"},x),j&&r.a.createElement(G,null),r.a.createElement(_.a,{onSubmit:function(e){e.preventDefault(),y(function(e,t){return function(){var a=Object(g.a)(v.a.mark((function a(n){var r,c,o;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"USER_LOGIN_REQUEST"}),r={headers:{"Content-Type":"application/json"}},a.next=5,h.a.post("/api/users/login",{username:e,password:t},r);case 5:c=a.sent,o=c.data,n({type:"USER_LOGIN_SUCCESS",payload:o}),localStorage.setItem("userInfo",JSON.stringify(o)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),n({type:"USER_LOGIN_FAIL",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()}(l,d))},style:{marginTop:"3vh",marginBottom:"3vh"}},r.a.createElement(_.a.Group,{controlId:"username"},r.a.createElement(_.a.Label,null,"Username"),r.a.createElement(_.a.Control,{type:"",placeholder:"Enter your username",value:l,onChange:function(e){return s(e.target.value)}})),r.a.createElement(_.a.Group,{controlId:"password"},r.a.createElement(_.a.Label,null,"Password"),r.a.createElement(_.a.Control,{type:"password",placeholder:"Enter your password",value:d,onChange:function(e){return f(e.target.value)},style:{marginBottom:"3vh"}})),r.a.createElement(w.a,{variant:"primary",type:"submit"},"Sign in"),r.a.createElement(w.a,{variant:"info",type:"submit",onClick:function(e){s("demo"),f("demouser")}},"Sign in as Demo user")),r.a.createElement(i.a,{className:"py-3"},r.a.createElement(p.a,null,"Don't have an account yet?",r.a.createElement(D.Link,{to:I?"/register?redirect=".concat(I):"/register"}," Register"))))},W=function(e){var t=e.location,a=e.history,c=Object(n.useState)(""),o=Object(S.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(""),m=Object(S.a)(u,2),d=m[0],f=m[1],y=Object(n.useState)(""),b=Object(S.a)(y,2),O=b[0],j=b[1],x=Object(n.useState)(null),I=Object(S.a)(x,2),C=I[0],L=I[1],k=Object(n.useState)(""),R=Object(S.a)(k,2),U=R[0],T=R[1],A=Object(n.useState)(""),P=Object(S.a)(A,2),F=P[0],B=P[1],M=Object(n.useState)([]),z=Object(S.a)(M,2),W=z[0],J=z[1],H=Object(n.useState)([]),Y=Object(S.a)(H,2),q=Y[0],V=Y[1],K=Object(n.useState)(""),X=Object(S.a)(K,2),Z=X[0],$=X[1],ee=Object(n.useState)(""),te=Object(S.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(""),ce=Object(S.a)(re,2),oe=ce[0],le=ce[1],se=Object(n.useState)(""),ue=Object(S.a)(se,2),ie=(ue[0],ue[1],Object(E.b)()),pe=Object(E.c)((function(e){return e.userRegister})),me=pe.userInfo,de=pe.loading,Ee=pe.error,fe=t.search?t.search.split("=")[1]:"/";Object(n.useEffect)((function(){me&&a.push(fe),function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/countries");case 2:t=e.sent,a=t.data,J(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[a,me,fe]);return r.a.createElement(N,null,C&&r.a.createElement(Q,{variant:"danger"},C),Ee&&r.a.createElement(Q,{variant:"danger"},Ee),de&&r.a.createElement(G,null),r.a.createElement(_.a,{onSubmit:function(e){e.preventDefault(),d!==O?L("Passwords don't match"):l.length<2||l.length>25?L("Your username must be from 2 to 25 characters long"):F?ae?oe?Z?ie(function(e,t,a,n,r,c,o){return function(){var l=Object(g.a)(v.a.mark((function l(s){var u,i,p;return v.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,s({type:"USER_REGISTER_REQUEST"}),u={headers:{"Content-Type":"application/json"}},l.next=5,h.a.post("/api/users",{username:e,password:t,knownAs:a,gender:n,country:r,city:c,introduction:o},u);case 5:i=l.sent,p=i.data,s({type:"USER_REGISTER_SUCCESS",payload:p}),s({type:"USER_LOGIN_SUCCESS",payload:p}),localStorage.setItem("userInfo",JSON.stringify(p)),l.next=15;break;case 12:l.prev=12,l.t0=l.catch(0),s({type:"USER_REGISTER_FAIL",payload:l.t0.response&&l.t0.response.data.message?l.t0.response.data.message:l.t0.message});case 15:case"end":return l.stop()}}),l,null,[[0,12]])})));return function(e){return l.apply(this,arguments)}}()}(l,d,U,F,ae,oe,Z)):L("Enter your introduction please!"):L("Select your city please!"):L("Select your country please!"):L("Select your gender please!")}},r.a.createElement(_.a.Group,{controlId:"username"},r.a.createElement(_.a.Label,null,"Username"),r.a.createElement(_.a.Control,{type:"",placeholder:"Enter your username",value:l,onChange:function(e){return s(e.target.value)}})),r.a.createElement(_.a.Group,{controlId:"password"},r.a.createElement(_.a.Label,null,"Password"),r.a.createElement(_.a.Control,{type:"password",placeholder:"Enter your password",value:d,onChange:function(e){return f(e.target.value)}})),r.a.createElement(_.a.Group,{controlId:"confirmPassword"},r.a.createElement(_.a.Label,null,"Confirm Password"),r.a.createElement(_.a.Control,{type:"password",placeholder:"Confirm your password",value:O,onChange:function(e){return j(e.target.value)}})),r.a.createElement(_.a.Group,{controlId:"knownAs"},r.a.createElement(_.a.Label,null,"Name"),r.a.createElement(_.a.Control,{type:"",placeholder:"Enter your name",value:U,onChange:function(e){return T(e.target.value)}})),r.a.createElement(_.a.Group,{controlId:"gender"},r.a.createElement(_.a.Label,null,"Gender"),r.a.createElement(_.a.Control,{as:"select",type:"",value:F,onChange:function(e){return B(e.target.value)}},r.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Select your gender"),r.a.createElement("option",{value:"Male"},"Male"),r.a.createElement("option",{value:"Female"},"Female"),r.a.createElement("option",{value:"Uknown"},"Unknown"))),r.a.createElement(_.a.Group,{controlId:"country"},r.a.createElement(_.a.Label,null,"Country you are in"),r.a.createElement(_.a.Control,{as:"select",type:"",value:ae,onChange:function(e){ne(e.target.value),function(){var e=Object(g.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/cities/".concat(t));case 2:a=e.sent,n=a.data,V(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(e.target.value)}},W.map((function(e,t){return r.a.createElement("option",{value:e.countryName,key:e._id},e.countryName)})),r.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Select a country"))),r.a.createElement(_.a.Group,{controlId:"city"},r.a.createElement(_.a.Label,null,"City you are in"),r.a.createElement(_.a.Control,{as:"select",type:"",value:oe,onChange:function(e){return le(e.target.value)}},q.map((function(e,t){return r.a.createElement("option",{value:e.cityName,key:e._id},e.cityName)})),r.a.createElement("option",{value:"",selected:!0,disabled:!0,hidden:!0},"Select a city"))),r.a.createElement(_.a.Group,{controlId:"introduction"},r.a.createElement(_.a.Label,null,"Introduction"),r.a.createElement(_.a.Control,{as:"textarea",style:{height:"100px"},value:Z,onChange:function(e){return $(e.target.value)}})),r.a.createElement(w.a,{variant:"primary",type:"submit"},"Next")),r.a.createElement(i.a,{className:"py-3"},r.a.createElement(p.a,null,"Already have an account?",r.a.createElement(D.Link,{to:fe?"/login?redirect=".concat(fe):"/login"},"Login"))))},J=function(e){var t=e.history,a=Object(E.b)(),c=Object(n.useState)(""),o=Object(S.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(""),i=Object(S.a)(u,2),m=i[0],d=i[1],f=Object(n.useState)(""),y=Object(S.a)(f,2),b=y[0],O=y[1],j=Object(n.useState)(null),x=Object(S.a)(j,2),I=x[0],C=x[1],L=Object(E.c)((function(e){return e.userDetails})),k=L.loading,R=L.error,U=L.user,T=Object(E.c)((function(e){return e.userLogin})).userInfo,A=Object(E.c)((function(e){return e.userUpdateProfile})).success,P=Object(E.c)((function(e){return e.userDeleteProfile})).success;Object(n.useEffect)((function(){var e;T?U.username?s(U.username):a((e="profile",function(){var t=Object(g.a)(v.a.mark((function t(a,n){var r,c,o,l,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"USER_DETAILS_REQUEST"}),r=n(),c=r.userLogin.userInfo,o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,h.a.get("/api/users/users/".concat(e),o);case 6:l=t.sent,s=l.data,a({type:"USER_DETAILS_SUCCESS",payload:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"USER_DETAILS_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}())):t.push("/login")}),[a,t,T,U,P]);return r.a.createElement(N,null,I&&r.a.createElement(Q,{variant:"danger"},I),R&&r.a.createElement(Q,{variant:"danger"},R),A&&r.a.createElement(Q,{variant:"success"},"Profile successfully updated!"),k&&r.a.createElement(G,null),r.a.createElement(_.a,{onSubmit:function(e){e.preventDefault(),m!==b?C("Passwords don't match"):a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a,n){var r,c,o,l,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"USER_UPDATE_PROFILE_REQUEST"}),r=n(),c=r.userLogin.userInfo,o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,h.a.put("/api/users/users/profile",e,o);case 6:l=t.sent,s=l.data,a({type:"USER_UPDATE_PROFILE_SUCCESS",payload:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"USER_UPDATE_PROFILE_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}({id:U._id,username:l,password:m}))},style:{marginTop:"3vh"}},r.a.createElement(_.a.Group,{controlId:"username"},r.a.createElement(_.a.Label,null,"Username"),r.a.createElement(_.a.Control,{type:"",placeholder:"Enter your username",value:l,onChange:function(e){return s(e.target.value)}})),r.a.createElement(_.a.Group,{controlId:"password"},r.a.createElement(_.a.Label,null,"Password"),r.a.createElement(_.a.Control,{type:"password",placeholder:"Enter your password",value:m,onChange:function(e){return d(e.target.value)}})),r.a.createElement(_.a.Group,{controlId:"confirmPassword"},r.a.createElement(_.a.Label,null,"Confirm Password"),r.a.createElement(_.a.Control,{type:"password",placeholder:"Confirm your password",value:b,onChange:function(e){return O(e.target.value)}})),r.a.createElement(p.a,{style:{marginTop:"3vh",display:"flex",justifyContent:"space-around",alignItems:"center",flexWrap:"norap"}},r.a.createElement(w.a,{variant:"primary",type:"submit"},"Update profile"),r.a.createElement(w.a,{onClick:function(e,t){window.confirm("Are you sure you want to delete your account?")&&a(function(e){return function(){var t=Object(g.a)(v.a.mark((function t(a,n){var r,c,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"USER_DELETE_PROFILE_REQUEST"}),r=n(),c=r.userLogin.userInfo,o={headers:{Authorization:"Bearer ".concat(c.token)}},localStorage.removeItem("userInfo"),a({type:"USER_LOGOUT"}),t.next=8,h.a.delete("/api/users/users/".concat(e),o);case 8:a({type:"USER_DELETE_PROFILE_SUCCESS"}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"USER_DELETE_PROFILE_FAIL",payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(T._id))},variant:"danger",type:"submit"},"Delete account"))))},H=function(e){var t=e.match,a=e.history,c=Object(n.useState)({}),o=Object(S.a)(c,2),s=o[0],p=o[1],m=Object(E.c)((function(e){return e.userLogin})).userInfo,d=Object(n.useState)([]),f=Object(S.a)(d,2),y=f[0],b=f[1],x=Object(n.useState)([]),I=Object(S.a)(x,2),C=(I[0],I[1],Object(n.useState)([])),L=Object(S.a)(C,2),U=L[0],T=L[1],A=Object(n.useState)(""),P=Object(S.a)(A,2),D=P[0],N=P[1],F=Object(n.useState)(""),G=Object(S.a)(F,2),B=G[0],M=G[1];Object(n.useEffect)((function(){if(m){var e={headers:{Authorization:"Bearer ".concat(m.token)}};(function(){var t=Object(g.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.get("/api/conversations/".concat(a),e);case 2:n=t.sent,r=n.data,b(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}})()(m._id)}else a.push("/login")}),[a,m]),Object(n.useEffect)((function(){m?"profile"!==t.params.id?(function(){var e=Object(g.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/users/users/".concat(t.params.id));case 2:a=e.sent,p(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),s&&function(){var e=Object(g.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/blogs/"+t.params.id);case 2:a=e.sent,T(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()):(function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/users/users/".concat(m._id));case 2:t=e.sent,p(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/blogs/"+m._id);case 2:t=e.sent,T(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()):a.push("/login")}),[a,m]);var Q={headers:{Authorization:"Bearer ".concat(m.token)}},z=function(){var e=Object(g.a)(v.a.mark((function e(n){var r,c,o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=13;break}if(r={headers:{Authorization:"Bearer ".concat(m.token)}},c=!0,0!==y.length?y.map((function(e){console.log(y),console.log(e);var a=e.participants.find((function(e){return e!==m._id}));console.log(a),console.log(t.params.id),t.params.id===a&&(c=!1)})):c=!0,console.log(c),!0!==c){e.next=11;break}return o={sender:m._id,reciever:s._id},e.next=9,h.a.post("/api/conversations",o,r);case 9:l=e.sent,b([].concat(Object(O.a)(y),[l.data]));case 11:e.next=14;break;case 13:a.push("/login");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(g.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={title:D,contents:B,userId:m._id},e.next=4,h.a.post("/api/blogs",a,Q);case 4:T(Object(O.a)(U)),window.location.reload();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(u.a,{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(i.a,{style:{marginTop:"2vh",width:"70vh"}},m&&m._id!==s._id?r.a.createElement(i.a,null,r.a.createElement(j.a,{style:{display:"flex",juctifyContent:"left",alignItems:"center",padding:"10vh"}},r.a.createElement(j.a.Title,null,r.a.createElement(k.a,{className:"mx-2",icon:R.c}),r.a.createElement("strong",null,s.username)),r.a.createElement(j.a.Text,null,s.knownAs+", "+s.gender),r.a.createElement(j.a.Text,null,s.city+", "+s.country),r.a.createElement(j.a.Text,null,s.introduction),r.a.createElement(l.LinkContainer,{to:"/messages",style:{width:"80%",marginTop:"2vh"}},r.a.createElement(w.a,{onClick:z,type:"submit",variant:"primary"},r.a.createElement(k.a,{className:"mx-2",icon:R.a}),"Send a message")))):r.a.createElement(i.a,null,r.a.createElement(j.a,{style:{display:"flex",juctifyContent:"left",alignItems:"center",padding:"10vh"}},r.a.createElement(j.a.Title,null,r.a.createElement(k.a,{className:"mx-2",icon:R.c}),r.a.createElement("strong",null,m.username)),r.a.createElement(j.a.Text,null,m.knownAs+", "+m.gender),r.a.createElement(j.a.Text,null,m.city+", "+m.country),r.a.createElement(j.a.Text,null,m.introduction)),r.a.createElement(i.a,{style:{padding:"5vh"}},r.a.createElement(_.a,{onSubmit:W},r.a.createElement(_.a.Control,{type:"",placeholder:"Title",value:D,onChange:function(e){return N(e.target.value)}}),r.a.createElement(_.a.Control,{onChange:function(e){return M(e.target.value)},value:B,as:"textarea",style:{height:"100px"},placeholder:"Write a new post"}),r.a.createElement(w.a,{type:"submit",className:"my-4",variant:"primary"},"Publish")))),r.a.createElement("h2",{style:{textAlign:"center",marginTop:"3vh"}},s.username,"'s posts:"),r.a.createElement("div",{style:{display:"flex",juctifyContent:"center",alignItems:"center",flexWrap:"wrap",padding:"10vh",marginTop:"2vh"}},U.map((function(e){return r.a.createElement(j.a,{key:e._id,style:{width:"100vh",marginBottom:"2vh"}},r.a.createElement(j.a.Body,null,r.a.createElement(j.a.Title,null,r.a.createElement("strong",null,e.title)),r.a.createElement(j.a.Text,null,e.contents)))})))))};var Y=function(){return r.a.createElement(D.BrowserRouter,null,r.a.createElement(b,null),r.a.createElement(A.d,{path:"/messages",component:U,exact:!0}),r.a.createElement(A.d,{path:"/",component:P,exact:!0}),r.a.createElement(A.d,{path:"/login",component:z,exact:!0}),r.a.createElement(A.d,{path:"/register",component:W,exact:!0}),r.a.createElement(A.d,{path:"/profile",component:H,exact:!0}),r.a.createElement(A.d,{path:"/profile/edit",component:J,exact:!0}),r.a.createElement(A.d,{path:"/users/:id",component:H}),r.a.createElement(A.d,{path:"/search/:keyword",component:P}))},q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,156)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))},V=a(58),K=a(96),X=a(95),Z=a(74),$=Object(V.combineReducers)({userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN_REQUEST":return{loading:!0};case"USER_LOGIN_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_LOGIN_FAIL":return{loading:!1,error:t.payload};case"USER_LOGOUT":return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTER_REQUEST":return{loading:!0};case"USER_REGISTER_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_REGISTER_FAIL":return{loading:!1,error:t.payload};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_DETAILS_REQUEST":return Object(Z.a)(Object(Z.a)({},e),{},{loading:!0});case"USER_DETAILS_SUCCESS":return{loading:!1,user:t.payload};case"USER_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_UPDATE_PROFILE_REQUEST":return{loading:!0};case"USER_UPDATE_PROFILE_SUCCESS":return{loading:!1,success:!0,userInfo:t.payload};case"USER_UPDATE_PROFILE_FAIL":return{loading:!1,error:t.payload};default:return e}},userDeleteProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_DELETE_PROFILE_REQUEST":return{loading:!0};case"USER_DELETE_PROFILE_SUCCESS":return{loading:!1,success:!0};case"USER_DELETE_PROFILE_FAIL":return{loading:!1,error:t.payload};default:return e}}}),ee={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},te=[K.a],ae=Object(V.createStore)($,ee,Object(X.composeWithDevTools)(V.applyMiddleware.apply(void 0,te)));o.a.render(r.a.createElement(E.a,{store:ae},r.a.createElement(Y,null)),document.getElementById("root")),q()},99:function(e,t,a){e.exports=a(142)}},[[99,1,2]]]);
//# sourceMappingURL=main.3f3ebc11.chunk.js.map